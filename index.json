[{"content":"Last month, I got a Dell R730xd and paid much time on Fighting with ChinaTelecom. Finally, I lost the war. However, fortunately, Tailscale can effectively(maybe) address my issue.\nI used Tailscale in the past, but was stopped by Chinese \u0026lsquo;Premium\u0026rsquo; Network. High latency and packet loss rate make me crazy.\nAnd \u0026rsquo;they\u0026rsquo; provides services, just like Google. Haha, actually, I\u0026rsquo;m not sensitive to this at all. I\u0026rsquo;m not a privacy-paranoid person. \u0026ldquo;Why not selfhost it?\u0026rdquo;, a real man(character I made up) said. So I host it on a server with CN21 network.\nGot to admit, Tailscale\u0026rsquo;s Hole Punching works seamlessly without any configuration needed â€“ it\u0026rsquo;s fantastic!\nSo, log into NixOS first(If you\u0026rsquo;re not using NixOS, I recommend giving it a try. It\u0026rsquo;s a must-try!). Then quickly finish configure it about 10 minutes.\nheadscale = { enable = true; # Specify listening on all available interfaces with 0.0.0.0 address = \u0026#34;0.0.0.0\u0026#34;; port = 443; # Any port you like settings = { # use \u0026#34;http://weed.ocfox.me\u0026#34; if you don\u0026#39;t need tls server_url = \u0026#34;https://weed.ocfox.me\u0026#34;; # Don\u0026#39;t forget forwaring if you use other port tls_letsencrypt_hostname = \u0026#34;weed.ocfox.me\u0026#34;; tls_letsencrypt_challenge_type = \u0026#34;TLS-ALPN-01\u0026#34;; # Any base_domain you like, in this case # your nodes will named `\u0026lt;nodename\u0026gt;.\u0026lt;user\u0026gt;.sex.allnight` dns_config.base_domain = \u0026#34;sex.allnight\u0026#34;; # Add this to avoid noisy warning ip_prefixes = [ \u0026#34;fd7a:115c:a1e0::/48\u0026#34; \u0026#34;100.64.0.0/10\u0026#34; ]; }; }; Copy this without commnets headscale = { enable = true; address = \u0026#34;0.0.0.0\u0026#34;; port = 443; settings = { server_url = \u0026#34;https://weed.ocfox.me\u0026#34;; tls_letsencrypt_hostname = \u0026#34;weed.ocfox.me\u0026#34;; tls_letsencrypt_challenge_type = \u0026#34;TLS-ALPN-01\u0026#34;; dns_config.base_domain = \u0026#34;sex.allnight\u0026#34;; }; }; \u0026ldquo;Why is it headscale instead of services.headscale?\u0026rdquo; \u0026ndash; I use haumea.2 Login headscale server to create a user\nheadscale namespaces create ocfox Now enable tailscale on your nodes in one line.\nservices.tailscale.enable = true; After rebuild, log into headscale.\n[ocfox@bed]$ sudo tailscale up --login-server https://weed.ocfox.me To authenticate, visit: https://weed.ocfox.me/register/nodekey:pleasefuckmefrommorningtothemidnight Visit this site is useless, it has not been implemented yet. But it can be auth at headscale server.\n[root@headserver:~]# headscale nodes register -k nodekey:pleasefuckmefrommorningtothemidnight -u ocfox [ocfox@bed]$ tailscale status 100.64.0.1 bed ocfox linux - Then use same way register another machine sofa. You can communication sofa and bed behind NAT now(I guess it should work). If not work, don\u0026rsquo;t worrid, at least my(your) nodes connect to headscale server is fast.\nIf you are on darwin(macos), congratulations you\u0026rsquo;ve fallen into a well. To specify login server with tailscale app(installed by App store), just following this\n$ /Applications/Tailscale.app/Contents/MacOS/Tailscale up --login-server https://^_^ And check nodekey on another terminal\n$ tailscale status ... https://weed.ocfox.me/register/nodekey:pleasefuckmefrommorningtothemidnight Of course, I(you) need to use magicDNS. However, if you happen to live in China and rely on a network proxy, magicDNS may pose some issues. It will prioritize the use of DNS provided by services.headscale.settings.dns_config.nameservers for all access. Currently, I don\u0026rsquo;t have a good solution, and I\u0026rsquo;ve resolve this issue by using a system proxy instead of TUN.\nAll last, Why I must use proxy to see this world? \u0026ndash; \u0026ldquo;Maybe I fucked a dog in my past life.\u0026rdquo;\nIf there\u0026rsquo;s anything I fucked up, please hit \u0026lsquo;Suggest Changes\u0026rsquo; at the top.\nAS4809 - a comprehensive range of high quality network services to customers around the world.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\nhaumea - Filesystem-based module system for Nix\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","permalink":"https://ocfox.me/posts/headscale-setup/","summary":"Last month, I got a Dell R730xd and paid much time on Fighting with ChinaTelecom. Finally, I lost the war. However, fortunately, Tailscale can effectively(maybe) address my issue.\nI used Tailscale in the past, but was stopped by Chinese \u0026lsquo;Premium\u0026rsquo; Network. High latency and packet loss rate make me crazy.\nAnd \u0026rsquo;they\u0026rsquo; provides services, just like Google. Haha, actually, I\u0026rsquo;m not sensitive to this at all. I\u0026rsquo;m not a privacy-paranoid person.","title":"Tailscale with Headscale?"},{"content":"Dual Boot Bluetooth When pair your device, Bluetooth service generates a unique set of pairing keys. So twice pair will generate two differen keys. Simplely synchronizing two pairing keys can solve it.\nSync pairing keys Pair device once on Windows and Linux. Mount Windows system partition on Linux. Use chntpw to change the pairing key in Windows. Get the pairing key\ncat /var/lib/bluetooth/\u0026lt;current_computer_bluetooth_mac\u0026gt;/\u0026lt;device_mac\u0026gt;/info ... [LinkKey] key=YOURDEVICEPAIRINGKEY ... chntpw -e WIN_PATH/Windows/System32/config/SYSTEM \u0026gt; l Node has 17 subkeys and 0 values key name \u0026lt;ActivationBroker\u0026gt; \u0026lt;ControlSet001\u0026gt; \u0026lt;DriverDatabase\u0026gt; \u0026lt;HardwareConfig\u0026gt; \u0026lt;Input\u0026gt; ... Replace ControlSetXXX with the value of your system.\ncd ControlSet001\\Services\\BTHPORT\\Parameters\\Keys (...)\\Services\\BTHPORT\\Parameters\\Keys\u0026gt; l Node has 2 subkeys and 0 values key name \u0026lt;144f8a...\u0026gt; \u0026lt;35d48b...\u0026gt; Edit Windows pairing key\n\u0026gt; cd \u0026lt;computer_bluetooth_mac\u0026gt; \u0026gt; l (...)\\BTHPORT\\Parameters\\Keys\\\u0026lt;computer_bluetooth_mac\u0026gt; \u0026gt; l Node has 0 subkeys and 1 values size type value name [value if type DWORD] 16 3 REG_BINARY \u0026lt;25f3e8ad4ce5\u0026gt; 16 3 REG_BINARY \u0026lt;device_mac\u0026gt; Don\u0026rsquo;t forget add space\ned \u0026lt;device_mac\u0026gt; .: 0 YO UR DE VI CE PA IR IN GK EY .s \u0026gt; q Reboot, and now there is no need to pair again after each system switching.\n","permalink":"https://ocfox.me/posts/dual-boot-bluetooth/","summary":"Edit pairing keys on Windows and Linux, make they are consistent","title":"Bluetooth Pairing on Dual Boot"}]