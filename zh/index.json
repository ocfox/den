[{"content":"Why? 我一直没有使用社交媒体的习惯，像是Twitter, Weibo之类。但是经常看到大家在聊天里分享链接，难免会想尝试一下。 我很喜欢Misskey的UI，好看。但是移动客户端很重要，如果没有的话就基本等于不会习惯性的访问。 简单的尝试之后 Mastodon 满足了大多数我的要求。\nNixOS configuration 在NixOS上部署很简单，只需要将DNS解析到相应的机器并填好设置，没有其他的步骤。 需要做的域名只有 WEB_DOMAIN。\nservices.mastodon = { enable = true; streamingProcesses = 1; # 推荐处理器核心-1 localDomain = \u0026#34;ocfox.me\u0026#34;; smtp.fromAddress = \u0026#34;server@mastodon.ocfox.me\u0026#34;; extraConfig = { WEB_DOMAIN = \u0026#34;mastodon.ocfox.me\u0026#34;; SINGLE_USER_MODE = \u0026#34;true\u0026#34;; }; }; 在最好的情况下，localDomain应该和WEB_DOMAIN保持一致，也就是并不需要单独设置WEB_DOMAIN。 但是我相信，你应该已经在它上面提供了别的内容吧，比如homepage之类的，不过mastodon允许我们这么做1。 只需要在localDomain上提供webfinger就好。\n接下来是Caddy的配置，记得替换email and WEB_DOMAIN。\n# 保证caddy具有mastodon web socket的读写权限 systemd.services.caddy.serviceConfig.SupplementaryGroups = [ \u0026#34;mastodon\u0026#34; ]; services.caddy = { enable = true; email = \u0026#34;\u0026lt;email for acme\u0026gt;\u0026#34;; virtualHosts = { \u0026#34;\u0026lt;WEB_DOMAIN\u0026gt;\u0026#34; = { extraConfig = \u0026#39;\u0026#39; handle_path /system/* { file_server * { root /var/lib/mastodon/public-system } } handle /api/v1/streaming/* { reverse_proxy unix//run/mastodon-streaming/streaming-1.socket } route * { file_server * { root ${pkgs.mastodon}/public pass_thru } reverse_proxy * unix//run/mastodon-web/web.socket } handle_errors { root * ${pkgs.mastodon}/public rewrite 500.html file_server } encode gzip header /* { Strict-Transport-Security \u0026#34;max-age=31536000;\u0026#34; } \u0026#39;\u0026#39;; }; }; nixos-rebuild之后，你就可以通过域名访问你的mastodon server啦。 接下来需要为自己创建一个用户。\nmastodon-tootctl accounts create USERNAME --email=YOUR_EMAIL --confirmed --role=Owner 你将会看到生成的密码打印在下面。\nSomething needed 如果使用了不同的localDomain，那么还需要在 localDomain 上提供webfinger。(只是单用户或者几个用户的话可以这么做), 不然请参考manual1。\nhttps://\u0026lt;WEB_DOMAIN\u0026gt;/.well-known/webfinger?resource=acct:\u0026lt;USERNAME\u0026gt;@\u0026lt;localDomain\u0026gt; 提供的json 复制到下面的路径就好。\nhttps://\u0026lt;localDomain\u0026gt;/.well-known/webfinger 如果是github pages并且部署后无法访问这个路径，可以在根目录添加空白文件.nojekyll解决。\n如果你之前在其他mastodon兼容的服务器注册过账户，那么也可以简单的迁移到新的账户。 在设置里找到 账户-\u0026gt;从其它账号迁入。接下来按照说明做就好，迁移完成后旧账户就不能正常使用了(大概)。\nUsing a different domain name for Mastodon and the users it serves\u0026#160;\u0026#x21a9;\u0026#xfe0e;\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","permalink":"https://ocfox.me/zh/posts/mastodon-nixos/","summary":"在NixOS上搭建自己的Mastodon服务器，并使用Caddy作为反向代理。","title":"终于, 我也有了自己的Mastodon服务器"},{"content":"什么? Gigabit网络接口只有300Mbps? 就因为装修工用了不存在的Cat 6e1网线, 1Gbps 的接口变成了甚至不到 300Mbps ? 这不可能（除非你离我家有几千公里你真的用了一整卷网线）。 虽然他是假的网线但应该也会有高于Cat5的水平吧 我猜。\n# 两个朋友通过墙里的线缆联系 [ ID] Interval Transfer Bitrate [ 7] 0.00-10.00 sec 364 MBytes 306 Mbits/sec sender [ 7] 0.00-10.01 sec 361 MBytes 303 Mbits/sec receiver 看起来他们的沟通出现了一些问题，好吧 让我把他们放在一起。\n# 两个朋友面对面联系 [ ID] Interval Transfer Bitrate [ 8] 0.00-10.00 sec 376 MBytes 310 Mbits/sec sender [ 8] 0.00-10.01 sec 383 MBytes 312 Mbits/sec receiver 还不如无线啊你们这个关系。难道是我mac有问题？怎么可能，估计是网卡有问题吧。\n(你可以嘲笑mac用户了，他们甚至没有RJ45) 那又怎么样，我还是很喜欢我的mac。在某种程度上 正好有另一个网卡，尝试！我去，居然完全正常！ 原因竟然是我那条cc数据线速度很慢。好了，这就是我做的蠢事。\n[ ID] Interval Transfer Bitrate [ 9] 0.00-10.00 sec 982 MBytes 823 Mbits/sec sender [ 9] 0.00-10.01 sec 979 MBytes 821 Mbits/sec receiver 最后就是这个情况，好吧，线还是很烂。但至少我一周前接的没有问题。 (这是我上一周将家里装修工留下的线接了水晶头。一共三组 三个墙上插座，三个水晶头。 100%成功率。我应该也算是接线大师了？)\n如果你看到这句话，说明你赚到了1分钟！看到这么有趣的事情完全不算浪费时间对吧。\n这个世界上没有Cat6e这样的标准，如果你用的也是Cat6e，恭喜你中奖了。\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n","permalink":"https://ocfox.me/zh/posts/ethernet-cable/","summary":"\u003ch3 id=\"什么-gigabit网络接口只有300mbps\"\u003e什么? Gigabit网络接口只有300Mbps?\u003c/h3\u003e\n\u003cp\u003e就因为装修工用了不存在的\u003ccode\u003eCat 6e\u003c/code\u003e\u003csup id=\"fnref:1\"\u003e\u003ca href=\"#fn:1\" class=\"footnote-ref\" role=\"doc-noteref\"\u003e1\u003c/a\u003e\u003c/sup\u003e网线, 1Gbps 的接口变成了甚至不到 300Mbps ?\n这不可能（除非\u003cdel\u003e你离我家有几千公里\u003c/del\u003e你真的用了一整卷网线）。\n虽然他是假的网线但应该也会有高于Cat5的水平吧 我猜。\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cpre tabindex=\"0\" style=\"color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-sh\" data-lang=\"sh\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#7f848e\"\u003e# 两个朋友通过墙里的线缆联系\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#56b6c2\"\u003e[\u003c/span\u003e ID\u003cspan style=\"color:#56b6c2\"\u003e]\u003c/span\u003e   Interval          Transfer    Bitrate\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#56b6c2\"\u003e[\u003c/span\u003e  7\u003cspan style=\"color:#56b6c2\"\u003e]\u003c/span\u003e   0.00-10.00  sec   \u003cspan style=\"color:#d19a66\"\u003e364\u003c/span\u003e MBytes   \u003cspan style=\"color:#d19a66\"\u003e306\u003c/span\u003e Mbits/sec     sender\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#56b6c2\"\u003e[\u003c/span\u003e  7\u003cspan style=\"color:#56b6c2\"\u003e]\u003c/span\u003e   0.00-10.01  sec   \u003cspan style=\"color:#d19a66\"\u003e361\u003c/span\u003e MBytes   \u003cspan style=\"color:#d19a66\"\u003e303\u003c/span\u003e Mbits/sec     receiver\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pr","title":"不要怀疑网线"}]